<!DOCTYPE html>
<html>
    <head>
        <title>OAuth Sandbox</title>
        <script src="OAuth/Cookie.js"></script>
        <script src="OAuth/Consumer.js"></script>
        <script src="OAuth/SignatureMethod.js"></script>
        <script src="OAuth/SignatureMethod/Plaintext.js"></script>
        <script src="OAuth/Service.js"></script>
        <script src="OAuth/Service/OAuthSandbox.js"></script>
        <script src="OAuth/Utilities.js"></script>
    </head>
    <body>
        <script>
            var options = {
                debug: true,
                key: '14f5532b7ae62d8d',
                secret: 'ca5fd9cd3d4b1d3ce27e75935ff3'
            };
            
            //var cookie = new OAuthCookie('oauth_token');
            //cookie.destroy();
            
            // oauth_token=829cebe86b1c84eb&oauth_token_secret=c99cfc4cb1285bfeac0efd9b6c62
            var sandbox_oauth = new OAuthServiceOAuthSandbox(options);
            var data = sandbox_oauth.twoLegged();
            
            if (!(sandbox_oauth.token && sandbox_oauth.token_secret)) {
                // need to get a access token
                sandbox_oauth.requestToken();
            }
            
            if (sandbox_oauth.token && sandbox_oauth.token_secret) {
                var url = sandbox_oauth.authorize();
                window.open(url);
                var verification = document.createElement('input');
                verification.setAttribute('type', 'text');
                verification.setAttribute('id', 'verification');
                document.body.appendChild(verification);
                
                var button = document.createElement('input');
                button.setAttribute('type', 'button');
                button.setAttribute('id', 'verify');
                button.setAttribute('value', 'Verify');
                document.body.appendChild(button);
                button.onclick = function() {
                    var verification = document.getElementById('verification');
                    sandbox_oauth.oauth_verifier = verification.value;
                    sandbox_oauth.accessToken();
                    var data = sandbox_oauth.threeLegged();
                };
            }
            
        </script>
    </body>
</html>
